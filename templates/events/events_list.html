{% extends "base.html" %}
{% load static %}

{% block title %}Events{% endblock %}

{% block content %}

<!-- ================= EVENTS PAGE WRAPPER ================= -->
<div class="events-page page-container">

    <!-- ================= PAGE TITLE ================= -->
    <div class="text-center mb-5 animate-hero">
        <h1 class="fw-bold hero-title">Upcoming Events</h1>
        <p class="hero-subtitle text-muted-soft">
            Book tickets for upcoming sports tournaments
        </p>
    </div>

    <!-- ================= CATEGORY FILTER ================= -->
    <div class="event-filters mb-5">
        <a href="{% url 'events:events_list' %}"
           class="filter-btn {% if not selected_category %}active{% endif %}">
            All
        </a>
        <a href="?category=cricket"
           class="filter-btn {% if selected_category == 'cricket' %}active{% endif %}">
            Cricket
        </a>
        <a href="?category=football"
           class="filter-btn {% if selected_category == 'football' %}active{% endif %}">
            Football
        </a>
        <a href="?category=basketball"
           class="filter-btn {% if selected_category == 'basketball' %}active{% endif %}">
            Basketball
        </a>
        <a href="?category=volleyball"
           class="filter-btn {% if selected_category == 'volleyball' %}active{% endif %}">
            Volleyball
        </a>
    </div>

    <!-- ================= EVENTS GRID ================= -->
    <div class="row g-4">

        {% for event in events %}
        <div class="col-md-6 col-lg-4">

            <div class="event-card hover-lift">

                <!-- ================= IMAGE ================= -->
                <div class="event-thumb">
                    {% if event.image %}
                        <img src="{{ event.image.url }}" alt="{{ event.name }}">
                    {% else %}
                        <img src="{% static 'images/event_placeholder.jpg' %}" alt="Event">
                    {% endif %}

                    {% if event.category %}
                        <span class="badge-soft position-absolute top-0 end-0 m-3">
                            {{ event.get_category_display }}
                        </span>
                    {% endif %}
                </div>

                <!-- ================= CONTENT ================= -->
                <div class="event-body">

                    <h4 class="event-title fw-bold mb-2">
                        {{ event.name }}
                    </h4>

                    <!-- DATE -->
                    {% if event.date %}
                        <p class="event-meta">
                            ğŸ“… {{ event.date|date:"M d, Y Â· h:i A" }}
                        </p>
                    {% else %}
                        <p class="event-meta text-muted-soft">
                            ğŸ“… Date will be announced
                        </p>
                    {% endif %}

                    <!-- LOCATION -->
                    <p class="event-meta mb-3">
                        ğŸ“ {{ event.location }}
                    </p>

                    <div class="divider-soft"></div>

                    <!-- FOOTER -->
                    <div class="event-footer d-flex justify-content-between align-items-center mt-3">
                        <span class="price-badge">
                            â‚¹{{ event.price }}
                        </span>

                        <a href="{% url 'booking:book_event' event.id %}"
                           class="btn btn-primary btn-sm">
                            Book Ticket
                        </a>
                    </div>

                </div>

            </div>
        </div>
        {% empty %}
        <div class="col-12 text-center mt-5">
            <p class="text-muted-soft fs-5">
                ğŸš« No events available right now
            </p>
        </div>
        {% endfor %}

    </div>

</div>

{% endblock %}
